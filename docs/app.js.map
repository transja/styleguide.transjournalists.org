{"version":3,"file":"main.js","sources":["src/js/main.js"],"sourcesContent":["// Desktop TOC\nif (window.innerWidth >= 768) {\n  // Rename the first TOC entry\n  $(\".table-of-contents > ul:first-child > li:first-child a\").text(\n    \"Introduction\"\n  );\n\n  // Hide all 3rd-level headings\n  $(\".table-of-contents ul li ul li ul\").css(\"display\", \"none\");\n\n  // Hide empty list items (i.e., without <a> tags but contain <ul> tags)\n  $(\".table-of-contents > ul > li > ul > li\").each((idx, el) => {\n    if (!$(el).children(\"a\").length) {\n      $(el).css(\"display\", \"none\");\n    }\n  });\n\n  const io = new IntersectionObserver((entries) => {\n    if (entries.length) $(`.table-of-contents li`).css(\"font-weight\", \"normal\");\n    entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n        $(`.table-of-contents [href=\"#${entry.target.id}\"]`)\n          .parent()\n          .css(\"font-weight\", \"bold\");\n        // console.log(\n        //   $(`.table-of-contents [href=\"#${entry.target.id}\"] ul`).children()\n        // );\n        // $(`.table-of-contents [href=\"#${entry.target.id}\"] ul`)\n        //   .children()\n        //   .css(\"display\", null);\n      }\n    });\n  });\n\n  document\n    .querySelectorAll(\".gh-content h1, .gh-content h2, .gh-content-h3\")\n    .forEach((el) => io.observe(el));\n\n  const search = $(\n    '<input type=\"text\" id=\"search\" placeholder=\"Search...\" />'\n  ).on(\"keyup\", (evt) => {\n    const getId = (el) => $(el).attr(\"id\") || getId($(el).parent());\n\n    if (evt.target.value !== \"\") {\n      const matches = [\n        ...$(\":not(.table-of-contents) p,li,h1,h2,h3,h4,h5\")\n          .filter((i, el) =>\n            $(el).text().toLowerCase().includes(evt.target.value.toLowerCase())\n          )\n          .map(\n            (i, el) =>\n              $(el).attr(\"id\") ||\n              $(el).prevAll(\"[id]\").attr(\"id\") ||\n              $(el).parent().attr(\"id\") ||\n              $(el).parent().prevAll(\"[id]\").attr(\"id\")\n          ),\n      ].map((d) => \"#\" + d);\n\n      $(\".table-of-contents ul.results\").empty();\n      $(\".table-of-contents .search\").css(\"display\", \"block\");\n      $(\".table-of-contents ul:not(.results)\")\n        .css(\"display\", \"none\")\n        .children(\"li\")\n        .each((i, el) => {\n          if (matches.includes($(el).children(\"a\").attr(\"href\"))) {\n            $(el).clone().appendTo(\".table-of-contents .results\");\n          }\n        });\n    } else {\n      $(\".table-of-contents .search\").css(\"display\", \"none\");\n      $(\".table-of-contents ul:not(.results)\").css(\"display\", \"block\");\n    }\n  });\n\n  const searchResults = $(\n    '<div class=\"search\"><h5>Search results</h5><ul class=\"results\"></ul></div>'\n  ).css(\"display\", \"none\");\n  // Add search to TOC\n  $(\".table-of-contents\").prepend(searchResults);\n  $(\".table-of-contents\").prepend(search);\n\n  // Add TOC header\n  $(\".table-of-contents\").prepend($(\"<h5>Table of contents</h5>\"));\n\n  // Scroll away header\n  let prevScrollpos = window.pageYOffset;\n\n  window.onscroll = () => {\n    const currentScrollPos = window.pageYOffset;\n    if (prevScrollpos > currentScrollPos) {\n      document.querySelector(\"header\").style.top = \"0\";\n      document.querySelector(\".table-of-contents\").style.top = \"100px\";\n      document.querySelector(\".table-of-contents\").style.height =\n        \"calc(100vh - 100px)\";\n    } else {\n      document.querySelector(\"header\").style.top = \"-100px\";\n      document.querySelector(\".table-of-contents\").style.top = \"0\";\n      document.querySelector(\".table-of-contents\").style.height = \"100vh\";\n    }\n    prevScrollpos = currentScrollPos;\n  };\n}\n\n// Add updated lines\nconst pubDate = new Date($(\"time.published\").text());\n$(\"h2[updated],h3[updated]\").each((i, v) => {\n  const ds = new Date(v.getAttribute(\"updated\"));\n  v.setAttribute(\n    \"title\",\n    `Last updated ${ds.toLocaleString(\"en-US\", {\n      dateStyle: \"medium\",\n    })}`\n  );\n});\n"],"names":["window","innerWidth","$","text","css","each","idx","el","children","length","io","IntersectionObserver","entries","forEach","entry","isIntersecting","target","id","parent","document","querySelectorAll","observe","search","on","evt","value","matches","filter","i","toLowerCase","includes","map","attr","prevAll","d","empty","clone","appendTo","searchResults","prepend","prevScrollpos","pageYOffset","onscroll","currentScrollPos","querySelector","style","top","height","Date","v","ds","getAttribute","setAttribute","toLocaleString","dateStyle"],"mappings":"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"}