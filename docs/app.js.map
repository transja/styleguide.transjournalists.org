{"version":3,"file":"main.js","sources":["src/js/main.js"],"sourcesContent":["// Desktop TOC\nif (window.innerWidth >= 768) {\n  // Rename the first TOC entry\n  $(\".table-of-contents > ul:first-child > li:first-child a\").text(\n    \"Introduction\"\n  );\n\n  // Hide all 3rd-level headings\n  $(\".table-of-contents ul li ul li ul\").css(\"display\", \"none\");\n\n  // Hide empty list items (i.e., without <a> tags but contain <ul> tags)\n  $(\".table-of-contents > ul > li > ul > li\").each((idx, el) => {\n    if (!$(el).children(\"a\").length) {\n      $(el).css(\"display\", \"none\");\n    }\n  });\n\n  const io = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n        if (entries.length)\n          $(`.table-of-contents li`).css(\"font-weight\", \"normal\");\n        $(`.table-of-contents [href=\"#${entry.target.id}\"]`)\n          .parent()\n          .css(\"font-weight\", \"bold\");\n        // console.log(\n        //   $(`.table-of-contents [href=\"#${entry.target.id}\"] ul`).children()\n        // );\n        // $(`.table-of-contents [href=\"#${entry.target.id}\"] ul`)\n        //   .children()\n        //   .css(\"display\", null);\n      }\n    });\n  });\n\n  document.querySelectorAll(\".gh-content h1\").forEach((el) => io.observe(el));\n\n  const search = $(\n    '<input type=\"text\" id=\"search\" placeholder=\"Search...\" />'\n  ).on(\"keyup\", (evt) => {\n    const getId = (el) => $(el).attr(\"id\") || getId($(el).parent());\n\n    if (evt.target.value !== \"\") {\n      const matches = [\n        ...$(\":not(.table-of-contents) p,li,h1,h2,h3,h4,h5\")\n          .filter((i, el) =>\n            $(el).text().toLowerCase().includes(evt.target.value.toLowerCase())\n          )\n          .map(\n            (i, el) =>\n              $(el).attr(\"id\") ||\n              $(el).prevAll(\"[id]\").attr(\"id\") ||\n              $(el).parent().attr(\"id\") ||\n              $(el).parent().prevAll(\"[id]\").attr(\"id\")\n          ),\n      ].map((d) => \"#\" + d);\n\n      $(\".table-of-contents ul.results\").empty();\n      $(\".table-of-contents .search\").css(\"display\", \"block\");\n      $(\".table-of-contents ul:not(.results)\")\n        .css(\"display\", \"none\")\n        .children(\"li\")\n        .each((i, el) => {\n          if (matches.includes($(el).children(\"a\").attr(\"href\"))) {\n            $(el).clone().appendTo(\".table-of-contents .results\");\n          }\n        });\n    } else {\n      $(\".table-of-contents .search\").css(\"display\", \"none\");\n      $(\".table-of-contents ul:not(.results)\").css(\"display\", \"block\");\n    }\n  });\n\n  const searchResults = $(\n    '<div class=\"search\"><h5>Search results</h5><ul class=\"results\"></ul></div>'\n  ).css(\"display\", \"none\");\n  // Add search to TOC\n  $(\".table-of-contents\").prepend(searchResults);\n  $(\".table-of-contents\").prepend(search);\n\n  // Add TOC header\n  $(\".table-of-contents\").prepend($(\"<h5>Table of Contents</h5>\"));\n}\n\n// Add updated lines\nconst pubDate = new Date($(\"time.published\").text());\n$(\"h3[updated]\").each((i, v) => {\n  const ds = new Date(v.getAttribute(\"updated\"));\n  if (ds !== pubDate) {\n    $(v).append(\n      `<div class=\"last-updated\">Last updated ${ds.toLocaleString(\"en-US\", {\n        dateStyle: \"medium\",\n      })}</div>`\n    );\n  }\n});\n\n// Add copy on click behavior\n$(\".header-anchor\").on(\"click\", ({ target }) => {\n  const url = new URL(window.location);\n  url.hash = $(target).attr(\"href\");\n  navigator.clipboard.writeText(url.toString());\n});"],"names":["window","innerWidth","$","text","css","each","idx","el","children","length","io","IntersectionObserver","entries","forEach","entry","isIntersecting","target","id","parent","document","querySelectorAll","observe","search","on","evt","value","matches","filter","i","toLowerCase","includes","map","attr","prevAll","d","empty","clone","appendTo","searchResults","prepend","pubDate","Date","v","ds","getAttribute","append","toLocaleString","dateStyle","_ref","url","URL","location","hash","navigator","clipboard","writeText","toString"],"mappings":"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"}