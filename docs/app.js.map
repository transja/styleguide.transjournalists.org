{"version":3,"file":"main.js","sources":["src/js/main.js"],"sourcesContent":["// Rename the first TOC entry\n$(\".table-of-contents > ul:first-child > li:first-child a\").text(\n  \"Introduction\"\n);\n\nconst search = $(\n  '<input type=\"text\" id=\"search\" placeholder=\"Search...\" />'\n).on(\"keyup\", (evt) => {\n  const getId = (el) => $(el).attr(\"id\") || getId($(el).parent());\n\n  if (evt.target.value !== \"\") {\n    const matches = [\n      ...$(\":not(.table-of-contents) p,li,h1,h2,h3,h4,h5\")\n        .filter((i, el) =>\n          $(el).text().toLowerCase().includes(evt.target.value.toLowerCase())\n        )\n        .map(\n          (i, el) =>\n            $(el).attr(\"id\") ||\n            $(el).prev(\"[id]\").attr(\"id\") ||\n            $(el).parent().attr(\"id\") ||\n            $(el).parent().prev(\"[id]\").attr(\"id\")\n        ),\n    ].map((d) => \"#\" + d);\n\n    $(\".table-of-contents ul.results\").empty();\n    $(\".table-of-contents .search\").css(\"display\", \"block\");\n    $(\".table-of-contents ul:not(.results)\")\n      .css(\"display\", \"none\")\n      .children(\"li\")\n      .each((i, el) => {\n        if (matches.includes($(el).children(\"a\").attr(\"href\"))) {\n          $(el).clone().appendTo(\".table-of-contents .results\");\n        }\n      });\n  } else {\n    $(\".table-of-contents .search\").css(\"display\", \"none\");\n    $(\".table-of-contents ul:not(.results)\").css(\"display\", \"block\");\n  }\n});\n\nconst searchResults = $(\n  '<div class=\"search\"><h5>Search results</h5><ul class=\"results\"></ul></div>'\n).css(\"display\", \"none\");\n// Add search to TOC\n$(\".table-of-contents\").prepend(searchResults);\n$(\".table-of-contents\").prepend(search);\n\n// Add TOC header\n$(\".table-of-contents\").prepend($(\"<h5>Table of contents</h5>\"));\n"],"names":["$","text","search","on","evt","target","value","matches","filter","i","el","toLowerCase","includes","map","attr","prev","parent","d","empty","css","children","each","clone","appendTo","searchResults","prepend"],"mappings":";;;;;EAAA;EACAA,CAAC,CAAC,wDAAwD,CAAC,CAACC,IAAI,CAC9D,cACF,CAAC,CAAA;EAED,MAAMC,MAAM,GAAGF,CAAC,CACd,2DACF,CAAC,CAACG,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAK;EAGrB,EAAA,IAAIA,GAAG,CAACC,MAAM,CAACC,KAAK,KAAK,EAAE,EAAE;MAC3B,MAAMC,OAAO,GAAG,CACd,GAAGP,CAAC,CAAC,8CAA8C,CAAC,CACjDQ,MAAM,CAAC,CAACC,CAAC,EAAEC,EAAE,KACZV,CAAC,CAACU,EAAE,CAAC,CAACT,IAAI,EAAE,CAACU,WAAW,EAAE,CAACC,QAAQ,CAACR,GAAG,CAACC,MAAM,CAACC,KAAK,CAACK,WAAW,EAAE,CACpE,CAAC,CACAE,GAAG,CACF,CAACJ,CAAC,EAAEC,EAAE,KACJV,CAAC,CAACU,EAAE,CAAC,CAACI,IAAI,CAAC,IAAI,CAAC,IAChBd,CAAC,CAACU,EAAE,CAAC,CAACK,IAAI,CAAC,MAAM,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC,IAC7Bd,CAAC,CAACU,EAAE,CAAC,CAACM,MAAM,EAAE,CAACF,IAAI,CAAC,IAAI,CAAC,IACzBd,CAAC,CAACU,EAAE,CAAC,CAACM,MAAM,EAAE,CAACD,IAAI,CAAC,MAAM,CAAC,CAACD,IAAI,CAAC,IAAI,CACzC,CAAC,CACJ,CAACD,GAAG,CAAEI,CAAC,IAAK,GAAG,GAAGA,CAAC,CAAC,CAAA;EAErBjB,IAAAA,CAAC,CAAC,+BAA+B,CAAC,CAACkB,KAAK,EAAE,CAAA;MAC1ClB,CAAC,CAAC,4BAA4B,CAAC,CAACmB,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;MACvDnB,CAAC,CAAC,qCAAqC,CAAC,CACrCmB,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CACtBC,QAAQ,CAAC,IAAI,CAAC,CACdC,IAAI,CAAC,CAACZ,CAAC,EAAEC,EAAE,KAAK;EACf,MAAA,IAAIH,OAAO,CAACK,QAAQ,CAACZ,CAAC,CAACU,EAAE,CAAC,CAACU,QAAQ,CAAC,GAAG,CAAC,CAACN,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE;UACtDd,CAAC,CAACU,EAAE,CAAC,CAACY,KAAK,EAAE,CAACC,QAAQ,CAAC,6BAA6B,CAAC,CAAA;EACvD,OAAA;EACF,KAAC,CAAC,CAAA;EACN,GAAC,MAAM;MACLvB,CAAC,CAAC,4BAA4B,CAAC,CAACmB,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;MACtDnB,CAAC,CAAC,qCAAqC,CAAC,CAACmB,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;EAClE,GAAA;EACF,CAAC,CAAC,CAAA;EAEF,MAAMK,aAAa,GAAGxB,CAAC,CACrB,4EACF,CAAC,CAACmB,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;EACxB;EACAnB,CAAC,CAAC,oBAAoB,CAAC,CAACyB,OAAO,CAACD,aAAa,CAAC,CAAA;EAC9CxB,CAAC,CAAC,oBAAoB,CAAC,CAACyB,OAAO,CAACvB,MAAM,CAAC,CAAA;;EAEvC;EACAF,CAAC,CAAC,oBAAoB,CAAC,CAACyB,OAAO,CAACzB,CAAC,CAAC,4BAA4B,CAAC,CAAC;;;;;;"}