{"version":3,"file":"main.js","sources":["src/js/main.js"],"sourcesContent":["// Rename the first TOC entry\n$(\".table-of-contents > ul:first-child > li:first-child a\").text(\n  \"Introduction\"\n);\n\nconst search = $(\n  '<input type=\"text\" id=\"search\" placeholder=\"Search...\" />'\n).on(\"keyup\", (evt) => {\n  const getId = (el) => {\n    return $(el).attr(\"id\") || getId($(el).parent());\n  };\n  if (evt.target.value !== \"\") {\n    const matches = [\n      ...$(\"p,li,h1,h2,h3,h4,h5\")\n        .not(\n          $(\n            \"p,li,h1,h2,h3,h4,h5\"\n              .split(\",\")\n              .map((d) => \".table-of-contents \" + d)\n              .join(\",\")\n          )\n        )\n        .filter((i, el) =>\n          $(el).text().toLowerCase().includes(evt.target.value.toLowerCase())\n        )\n        .map(\n          (i, el) =>\n            $(el).attr(\"id\") ||\n            $(el).prev(\"[id]\").attr(\"id\") ||\n            $(el).parent().attr(\"id\") ||\n            $(el).parent().prev(\"[id]\").attr(\"id\")\n        ),\n    ].map((d) => \"#\" + d);\n\n    $(\".table-of-contents ul.results\").empty();\n    $(\".table-of-contents .search\").css(\"display\", \"block\");\n    $(\".table-of-contents ul:not(.results)\")\n      .css(\"display\", \"none\")\n      .children(\"li\")\n      .each((i, el) => {\n        if (matches.includes($(el).children(\"a\").attr(\"href\"))) {\n          $(el).clone().appendTo(\".table-of-contents .results\");\n        }\n      });\n  } else {\n    $(\".table-of-contents .search\").css(\"display\", \"none\");\n    $(\".table-of-contents ul:not(.results)\").css(\"display\", \"block\");\n  }\n});\n\nconst searchResults = $(\n  '<div class=\"search\"><h5>Search results</h5><ul class=\"results\"></ul></div>'\n).css(\"display\", \"none\");\n// Add search to TOC\n$(\".table-of-contents\").prepend(searchResults);\n$(\".table-of-contents\").prepend(search);\n\n// Add TOC header\n$(\".table-of-contents\").prepend($(\"<h5>Table of contents</h5>\"));\n"],"names":["$","text","search","on","evt","target","value","matches","not","split","map","d","join","filter","i","el","toLowerCase","includes","attr","prev","parent","empty","css","children","each","clone","appendTo","searchResults","prepend"],"mappings":";;;;;EAAA;EACAA,CAAC,CAAC,wDAAwD,CAAC,CAACC,IAAI,CAC9D,cACF,CAAC,CAAA;EAED,MAAMC,MAAM,GAAGF,CAAC,CACd,2DACF,CAAC,CAACG,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAK;EAIrB,EAAA,IAAIA,GAAG,CAACC,MAAM,CAACC,KAAK,KAAK,EAAE,EAAE;EAC3B,IAAA,MAAMC,OAAO,GAAG,CACd,GAAGP,CAAC,CAAC,qBAAqB,CAAC,CACxBQ,GAAG,CACFR,CAAC,CACC,qBAAqB,CAClBS,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAAEC,CAAC,IAAK,qBAAqB,GAAGA,CAAC,CAAC,CACrCC,IAAI,CAAC,GAAG,CACb,CACF,CAAC,CACAC,MAAM,CAAC,CAACC,CAAC,EAAEC,EAAE,KACZf,CAAC,CAACe,EAAE,CAAC,CAACd,IAAI,EAAE,CAACe,WAAW,EAAE,CAACC,QAAQ,CAACb,GAAG,CAACC,MAAM,CAACC,KAAK,CAACU,WAAW,EAAE,CACpE,CAAC,CACAN,GAAG,CACF,CAACI,CAAC,EAAEC,EAAE,KACJf,CAAC,CAACe,EAAE,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC,IAChBlB,CAAC,CAACe,EAAE,CAAC,CAACI,IAAI,CAAC,MAAM,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC,IAC7BlB,CAAC,CAACe,EAAE,CAAC,CAACK,MAAM,EAAE,CAACF,IAAI,CAAC,IAAI,CAAC,IACzBlB,CAAC,CAACe,EAAE,CAAC,CAACK,MAAM,EAAE,CAACD,IAAI,CAAC,MAAM,CAAC,CAACD,IAAI,CAAC,IAAI,CACzC,CAAC,CACJ,CAACR,GAAG,CAAEC,CAAC,IAAK,GAAG,GAAGA,CAAC,CAAC,CAAA;EAErBX,IAAAA,CAAC,CAAC,+BAA+B,CAAC,CAACqB,KAAK,EAAE,CAAA;MAC1CrB,CAAC,CAAC,4BAA4B,CAAC,CAACsB,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;MACvDtB,CAAC,CAAC,qCAAqC,CAAC,CACrCsB,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CACtBC,QAAQ,CAAC,IAAI,CAAC,CACdC,IAAI,CAAC,CAACV,CAAC,EAAEC,EAAE,KAAK;EACf,MAAA,IAAIR,OAAO,CAACU,QAAQ,CAACjB,CAAC,CAACe,EAAE,CAAC,CAACQ,QAAQ,CAAC,GAAG,CAAC,CAACL,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE;UACtDlB,CAAC,CAACe,EAAE,CAAC,CAACU,KAAK,EAAE,CAACC,QAAQ,CAAC,6BAA6B,CAAC,CAAA;EACvD,OAAA;EACF,KAAC,CAAC,CAAA;EACN,GAAC,MAAM;MACL1B,CAAC,CAAC,4BAA4B,CAAC,CAACsB,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;MACtDtB,CAAC,CAAC,qCAAqC,CAAC,CAACsB,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;EAClE,GAAA;EACF,CAAC,CAAC,CAAA;EAEF,MAAMK,aAAa,GAAG3B,CAAC,CACrB,4EACF,CAAC,CAACsB,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;EACxB;EACAtB,CAAC,CAAC,oBAAoB,CAAC,CAAC4B,OAAO,CAACD,aAAa,CAAC,CAAA;EAC9C3B,CAAC,CAAC,oBAAoB,CAAC,CAAC4B,OAAO,CAAC1B,MAAM,CAAC,CAAA;;EAEvC;EACAF,CAAC,CAAC,oBAAoB,CAAC,CAAC4B,OAAO,CAAC5B,CAAC,CAAC,4BAA4B,CAAC,CAAC;;;;;;"}